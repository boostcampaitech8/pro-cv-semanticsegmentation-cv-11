# HRNet-W18 configuration example
# This is an example config file for using HRNet with the project

# data 관련 설정
image_root: /data/ephemeral/home/dataset/train/DCM
label_root: /data/ephemeral/home/dataset/train/outputs_json

# 모델명 및 사전 학습 여부
model_name: HRNet
model_parameter:
  config_path: configs/mmseg/hrnet_w18_fcn.py
  num_classes: 29
  # pretrained: 'open-mmlab://msra/hrnetv2_w18'  # Optional: override pretrained weights

# batch_size (HRNet은 메모리를 많이 사용하므로 조정 필요)
train_batch_size: 4 # -> 4로 도전??
val_batch_size: 8 # -> 8로 도전??

# val_num_worker 지정
num_workers: 4

# image resize
image_size: &image_size 1024

# transform 관련
train_transform:
  Resize:
    width: *image_size
    height: *image_size

val_transform:
  Resize:
    width: *image_size
    height: *image_size

# 학습 관련 하이퍼파라미터
lr: 1e-3
weight_decay: 1e-6

max_epoch: &max_epoch 30

# loss 관련 설정
loss_name: Mixed

# combo loss 사용시
loss_parameter:
  losses:
    - name: BCEWithLogitsLoss
      weight: 0.5
      params: {}
    - name: DiceLoss
      weight: 0.5
      params:
        smooth: 1e-5

# scheduler 관련 설정
scheduler_name: ReduceLROnPlateau

# scheduler 필요한 parameter -> dict 형태로 작성
scheduler_parameter:
  mode: max
  factor: 0.5
  patience: 1
  threshold: 0.005
  threshold_mode: abs
  min_lr: 1e-6

# optimizer 관련 설정
optimizer_name: adamw

# random seed값
seed: 21

# validation 관련 인자
val_fold: 0
val_interval: 3
threshold: 0.5

# checkpoint 저장 경로
save_dir: /data/ephemeral/home/pro-cv-semanticsegmentation-cv-11/checkpoints/HRNet_W18
# 가중치 파일 이름 형식 (optional, 기본값: "best_{epoch}epoch_{dice_score:.4f}.pt")
# 사용 가능한 변수: {epoch}, {dice_score}
# 예시: "hrnet_w18_best_{epoch}epoch_{dice_score:.4f}.pt"
checkpoint_name_format: "resize_1024_batch_4_8-best_{epoch}epoch_{dice_score:.4f}.pt"

# wandb
team_name: cv_11
project_name: cv-11-SEG
experiment_detail: hrnet_w18-resize_1024_batch_4_8

